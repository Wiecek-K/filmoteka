{"mappings":"YAAA,MAAMA,EAAeC,SAASC,cAAc,qBACtCC,EAAiBF,SAASC,cAAc,eAOvC,SAASE,IACfD,EAAeE,UAAUC,IAAI,oBAC9B,CARaL,SAASM,iBAAiB,wBAUlCC,SAASC,IACbA,EAAOC,iBAAiB,SAAS,KAChC,MAAMC,EAAyC,SAAhCF,EAAOG,QAAQC,aAA0B,GAAI,EACtDC,EAASL,EACbM,QAAQ,uBACRb,cAAc,2BACVc,EAAcF,EAAOZ,cAAc,iBACzC,IAAIe,EAAW,IAAIH,EAAOI,UAAUC,QAAQH,GAAeL,EACvDM,EAAW,IAAGA,EAAWH,EAAOI,SAASE,OAAS,GAClDH,GAAYH,EAAOI,SAASE,SAAQH,EAAW,GAEnDH,EAAOI,SAASD,GAAUL,QAAQS,QAAS,SACpCL,EAAYJ,QAAQS,MAAM,GAClC,IAGDrB,EAAaU,iBAAiB,SAxBvB,WACNP,EAAeE,UAAUiB,OAAO,oBACjC,IAuBAC,OAAOb,iBAAiB,WAAYc,IACjB,WAAdA,EAAMC,KACTrB,GAAA,IAGFmB,OAAOb,iBAAiB,SAAUc,IAC7BA,EAAME,OAAOrB,UAAUsB,SAAS,eACnCvB,GAAA,ICjCF,MAAMwB,EAAWC,KAAKC,MAAMC,aAAaC,QAAQ,UAC3CC,EAAaJ,KAAKC,MAAMC,aAAaC,QAAQ,YAE7CE,EAAcjC,SAASC,cAAc,cACrCiC,EAAgBlC,SAASC,cAAc,gBAEvCkC,EAAU,mCACVC,EAAW,+BAiBjB,SAASC,EAAcC,EAAQC,EAAY,GACzC,MAAMC,EAAkBxC,SAASC,cAAc,oBAC/CuC,EAAgBC,UAAY,GAC5BH,EAAO/B,SAAQmC,MAAMC,IACnB,MACMC,SAXVF,eAAyBG,GACvB,MAAMC,QAAiBC,MAAM,GAAGX,WAAkBS,aAAmBV,KAErE,aADmBW,EAASE,QAChBC,MACd,CAMyBC,CAAUP,EAAMQ,KACXC,KAAIC,GAASA,EAAMC,OAGvCC,GADJX,EAAWzB,OAASoB,EAAYK,EAAWY,MAAM,EAAGjB,GAAWkB,OAAO,CAAC,UAAYb,GACnDc,KAAK,MAEjCC,EAAY,wBACDhB,EAAMQ,sGAEjBR,EAAMiB,qBACEjB,EAAMkB,4EACiBlB,EAAMkB,iGAEFN,sDAA8DZ,EAAMmB,aAAaN,MACxH,EACA,WAGFhB,EAAgBuB,mBAAmB,YAAaJ,EAAA,IAElDnB,EAAgB/B,iBAAiB,SAASuD,IACA,OAApCA,EAAEvC,OAAOX,QAAQ,iBAGrBmD,aACAC,YACAC,EAAeH,EAAEvC,OAAOX,QAAQ,eAAeH,QAAQwC,IAAIiB,MAAKzB,IAC9D0B,YAAY1B,GACZ2B,cAAA,IACF,GAEJ,CAlDArC,EAAYxB,iBAAiB,SAASiC,UAEpCL,QADwBkC,EAAK5C,GACf,IAEhBO,EAAczB,iBAAiB,SAASiC,UAEtCL,QAD0BkC,EAAKvC,GACjB,IA8ChB,MAAMmC,EAAiBzB,MAAM8B,IAC3B,IACE,MAAM1B,QAAiBC,MACrB,sCAAsCyB,6DAGxC,aADoB1B,EAASE,MAE/B,CAAE,MAAOyB,GACPC,QAAQC,IAAIF,EACd,GAEF/B,eAAe6B,EAAKK,GAOlB,aANyBC,QAAQC,IAC/BF,EAAIxB,KAAIV,MAAMG,SACYsB,EAAetB,KAK7C,C","sources":["src/js/modal-devs.js","src/library.js"],"sourcesContent":["const modalDevLink = document.querySelector(\".footer-highlight\");\nconst modalDevWindow = document.querySelector(\".modal-devs\");\nconst btns = document.querySelectorAll(\"[data-slider-button]\");\n\nexport function openModalDevs() {\n\tmodalDevWindow.classList.remove(\"modal-devs-hidden\");\n}\n\nexport function closeModalDevs() {\n\tmodalDevWindow.classList.add(\"modal-devs-hidden\");\n}\n\nbtns.forEach((button) => {\n\tbutton.addEventListener(\"click\", () => {\n\t\tconst offset = button.dataset.sliderButton === \"next\" ? 1 : -1;\n\t\tconst slides = button\n\t\t\t.closest(\".modal-devs__slider\")\n\t\t\t.querySelector(\".modal-devs__slide-list\");\n\t\tconst activeSlide = slides.querySelector(\"[data-active]\");\n\t\tlet newIndex = [...slides.children].indexOf(activeSlide) + offset;\n\t\tif (newIndex < 0) newIndex = slides.children.length - 1;\n\t\tif (newIndex >= slides.children.length) newIndex = 0;\n\n\t\tslides.children[newIndex].dataset.active = true;\n\t\tdelete activeSlide.dataset.active;\n\t});\n});\n\nmodalDevLink.addEventListener(\"click\", openModalDevs);\nwindow.addEventListener(\"keydown\", (event) => {\n\tif (event.key === \"Escape\") {\n\t\tcloseModalDevs();\n\t}\n});\nwindow.addEventListener(\"click\", (event) => {\n\tif (event.target.classList.contains(\"modal-devs\")) {\n\t\tcloseModalDevs();\n\t}\n});\n","import './sass/main.scss';\nimport './js/modal-devs';\n\nconst queueIds = JSON.parse(localStorage.getItem('queue'));\nconst watchedIds = JSON.parse(localStorage.getItem('watched'));\n\nconst queueButton = document.querySelector('#queue-btn');\nconst watchedButton = document.querySelector('#watched-btn');\n\nconst API_KEY = '3453ae595a5d53cbc877c6d05de8a002';\nconst BASE_URL = 'https://api.themoviedb.org/3';\n\nqueueButton.addEventListener('click', async () => {\n  let queueMovies = await save(queueIds);\n  displayMovies(queueMovies);\n});\nwatchedButton.addEventListener('click', async () => {\n  let watchedMovies = await save(watchedIds);\n  displayMovies(watchedMovies);\n});\n\nasync function getGenres(movieId) {\n  const response = await fetch(`${BASE_URL}/movie/${movieId}?api_key=${API_KEY}`);\n  const data = await response.json();\n  return data.genres;\n}\n\nfunction displayMovies(movies, maxGenres = 2) {\n  const moviesContainer = document.querySelector('#library-gallery');\n  moviesContainer.innerHTML = '';\n  movies.forEach(async movie => {\n    const genres = await getGenres(movie.id);\n    const genreNames = genres.map(genre => genre.name);\n    const displayedGenres =\n      genreNames.length > maxGenres ? genreNames.slice(0, maxGenres).concat(['other']) : genreNames;\n    const genreText = displayedGenres.join(', ');\n\n    const movieCard = `\n      <div data-id=${movie.id} class=\"movie-card\">\n        <img class=\"movie-card__image\" src=\"https://image.tmdb.org/t/p/w500${\n          movie.poster_path\n        }\" alt=\"${movie.title}\" width=\"395\" height=\"574\">\n        <h2 class=\"movie-card__tittle\">${movie.title}</h2>\n        <p class=\"movie-card__info\"> \n        <span class=\"movie-card__overview\">${genreText}</span> | <span class=\"movie-card__realease-date\">${movie.release_date.slice(\n      0,\n      4,\n    )}\n    `;\n    moviesContainer.insertAdjacentHTML('beforeend', movieCard);\n  });\n  moviesContainer.addEventListener('click', e => {\n    if (e.target.closest('.movie-card') === null) {\n      return;\n    }\n    showLoader();\n    showModal();\n    fetchMovieById(e.target.closest('.movie-card').dataset.id).then(movie => {\n      renderModal(movie);\n      removeLoader();\n    });\n  });\n}\n\nconst fetchMovieById = async movie_id => {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${movie_id}?api_key=964358699754c21d74c014b561cf196c&language=en-US`,\n    );\n    const movie = await response.json();\n    return movie;\n  } catch (error) {\n    console.log(error);\n  }\n};\nasync function save(tab) {\n  const moviesData = await Promise.all(\n    tab.map(async movieId => {\n      const movieData = await fetchMovieById(movieId);\n      return movieData;\n    }),\n  );\n  return moviesData;\n}\n"],"names":["$61b9c1a142c2c828$var$modalDevLink","document","querySelector","$61b9c1a142c2c828$var$modalDevWindow","$61b9c1a142c2c828$export$5e116a654520e5af","classList","add","querySelectorAll","forEach","button","addEventListener","offset","dataset","sliderButton","slides","closest","activeSlide","newIndex","children","indexOf","length","active","remove","window","event","key","target","contains","$cecbdd76f2d3d4bd$var$queueIds","JSON","parse","localStorage","getItem","$cecbdd76f2d3d4bd$var$watchedIds","$cecbdd76f2d3d4bd$var$queueButton","$cecbdd76f2d3d4bd$var$watchedButton","$cecbdd76f2d3d4bd$var$API_KEY","$cecbdd76f2d3d4bd$var$BASE_URL","$cecbdd76f2d3d4bd$var$displayMovies","movies","maxGenres","moviesContainer","innerHTML","async","movie","genreNames","movieId","response","fetch","json","genres","$cecbdd76f2d3d4bd$var$getGenres","id","map","genre","name","genreText","slice","concat","join","movieCard","poster_path","title","release_date","insertAdjacentHTML","e","showLoader","showModal","$cecbdd76f2d3d4bd$var$fetchMovieById","then","renderModal","removeLoader","$cecbdd76f2d3d4bd$var$save","movie_id","error","console","log","tab","Promise","all"],"version":3,"file":"library.dce4e652.js.map"}